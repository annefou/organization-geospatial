<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2018-04-12 19:09:39 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-dc.ico" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Introduction to Spatio-Temporal Data: Introduction to Spatial Data</title>
  </head>
  <body>
    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../conduct/">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-spatial-data-structures-formats/">Introduction to Spatial Data</a></li>
            
            <li><a href="../02-organising-spatial-data/">Organising a spatial data project</a></li>
            
            <li><a href="../03-the-geospatial-landscape/">The Geospatial Landscape</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.md">License</a></li>
	
	
	<li><a href="/edit/gh-pages/_episodes_rmd/01-spatial-data-structures-formats.Rmd">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">Introduction to Spatio-Temporal Data</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-organising-spatial-data/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Introduction to Spatial Data</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 30 min
      <br/>
      <strong>Exercises:</strong> ?? min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>TBD</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>TBD</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>This tutorial provides an overview of key spatial data concepts, including structures and common storage and transfer formats.</p>

<p><strong>Skill Level:</strong> This tutorial provides conceptual background for the Data Carpentry
geospatial tutorial series. The concepts outlined in this tutorial relate to many 
programming languages and data types!</p>

<h1 id="goals--objectives">Goals / Objectives</h1>

<p>After completing this activity, you will:</p>

<ul>
  <li>Understand the data structures used to represent spatial information, including their strengths and weaknesses</li>
  <li>Become familiar with common storage and transfer formats</li>
  <li>Understand how those formats are currently represented in R and in Python <strong>(too much???)</strong></li>
</ul>

<p>All of the topics below are covered in more detail in later episodes. This episode just provides enough background to help you get started.</p>

<h1 id="structures-raster-and-vector">Structures: Raster and Vector</h1>

<h2 id="raster">Raster</h2>

<p>The raster data structure is a regular grid of equally-sized cells, each holding a single numeric value. The cell values can represent a continuous surface (e.g. elevation) or a categorical classification (e.g. land use). If this sounds familiar, it is because this data structure is very common: its how we represent any digital image. A geospatial raster is only different from a digital photo in that it is accompanied by spatial information that connects the data to a particular location. This includes the raster’s extent and cell size, the number of rows and columns, and its coordinate reference system (CRS, more on this later).</p>

<p>Raster data has some important advantages:</p>

<ul>
  <li>representation of continuous surfaces</li>
  <li>potentially very high levels of detail</li>
  <li>Data is ‘unweighted’ across its extent - the geometry doesn’t implicitly highlight
features (wording?? unbiased?)</li>
  <li>Cell-by-cell calculations can be very fast and efficient</li>
</ul>

<p>The downsides of raster data are</p>

<ul>
  <li>very large file sizes as cell size gets smaller</li>
  <li>currently popular formats don’t embed metadata well (more on this later!)</li>
  <li>can be difficult to represent complex information</li>
</ul>

<p>Satellite imagery is probably the most complex raster representation you will work with. Satellites like Landsat capture information at multiple wavelengths, from both human-visible and infrared bands. Final products are split into specific wavelength ranges, so to make a colour image of the land surface, one may have to combine red, green, and blue datasets.</p>

<p><em>nb shld talk to Lovelace et al about borrowing some images from - https://bookdown.org/robinlovelace/geocompr/spatial-class.html#raster-data, for both r and v</em></p>

<h2 id="vector">Vector</h2>

<p>Vector data structures aim to represent specific features on the Earth’s surface, and then assign attributes to those features. All vector datasets are based around coordinate points - usually paired x,y values in 2D space. There are many possible way to arrange and connect a set of points, so some standards have been developed to keep vector formats interoperable. The most common standard you will encounter is OGC Simple Features.</p>

<p>Simple Features defines 17 types of vector geometry, and the vast majority of data uses just three of these classes - Points, Lines, and Polygons. Points are assembled into more complex structures by straight lines only.</p>

<p>&lt; insert image &gt;</p>

<p>A Point is just a single coordinate pair. A line made when at least two points are grouped together. A polygon requires at least three points, and then a fourth point that matches the first one, closing the loop. The points defining lines and polygons also need to be arranged in a sensible sequence to be valid - if you draw straight lines between each point, those lines should never cross. Following these rules makes it possible to do complex geometric operations by layering vector datasets together.</p>

<p>Vector data has some important advantages:</p>

<ul>
  <li>The geometry itself contains information about what the dataset creator thought was important</li>
  <li>The geometry structures hold information in themselves - why choose point over polygon, for instance?</li>
  <li>Each geometry feature can carry multiple attributes instead of just one, e.g. a database of cities can have attributes for name, country, population, etc</li>
  <li>Data storage can be very efficient compared to rasters</li>
</ul>

<p>The downsides of vector data are</p>

<ul>
  <li>potential loss of detail compared to raster</li>
  <li>potential bias in datasets - what didn’t get recorded?</li>
  <li>Calculations involving multiple vector layers need to do math on the geometry as well as the attributes, so can be slow compared to raster math</li>
</ul>

<p>Vector datasets are in use in many industries besides geospatial. For instance, computer graphics are largely vector-based, although the data structures in use tend to join points using arcs and complex curves rather than straight lines. Computer-aided design (CAD) is also vector-based. The difference is, again, that geospatial datasets are accompanied by information tying their features to real-world locations. Its time to talk about how that works.</p>

<p><em>&lt;worth mentioning arc-node topology yet? probs leave until specific vector lesson&gt;</em></p>

<h2 id="coordinate-reference-systems">Coordinate Reference Systems</h2>

<p>A data structure cannot be considered geospatial unless it is accompanied by spatial reference system (SRS) information, in a format that geospatial applications can use to display and manipulate the data correctly. SRS information connects data to the Earth’s surface using a mathematical model.</p>

<p>Note: ‘CRS’ (‘coordinate reference system’) is a common acronym used interchangeably with SRS.</p>

<p>CRS information has three components:</p>

<p>CRS = Datum + Projection + Additional Parameters <em>formatting</em></p>

<p>A common analogy employed to teach projections is the orange peel analogy. If you imagine that the earth is an orange, how you peel it and then flatten the peel is similar to how projections get made. We will also use it here.</p>

<h3 id="datum">Datum</h3>

<p>A Datum is a model of the shape of the earth. It has angular units (i.e. degrees) and defines the starting point (i.e. where is (0,0)?) so the angles reference a meaningful spot on the earth. Common global datums are WGS84 and NAD83. Datums can also be local, fit to a particular area of the globe, but ill-fitting outside the area of intended use.</p>

<p>When datums are used by themselves they are called a Geographic Coordinate System.</p>

<p><em>Orange Peel Analogy: a datum is your choice of fruit to use in the orange peel analogy. Is the earth an orange, a lemon, a lime, a grapefruit?</em></p>

<p>&lt;image of citrus from https://github.com/MicheleTobias/R-Projections-Workshop&gt;</p>

<h3 id="projection">Projection</h3>

<p>A Projection is a mathematical transformation of the angular measurements on a round earth to a flat surface (i.e. paper or a computer screen).</p>

<p>The units associated with a given projection are usually linear (feet, meters, etc.).</p>

<p>Many people use the term “projection” when they actually mean “coordinate reference system”.</p>

<p><em>Orange Peel Analogy: a projection is how you peel your orange and then flatten the peel.</em></p>

<p>&lt; image of peeled orange with globe drawn on from  https://github.com/MicheleTobias/R-Projections-Workshop &gt;</p>

<h3 id="additional-parameters">Additional Parameters</h3>

<p>Additional parameters are often necessary to create the full coordinate reference system. For example, one common additional parameter is a definition of the center of the map. The number of required additional parameters depends on what is needed by each specific projection.</p>

<p><em>Orange Peel Analogy: an additional parameter could include a definition of the location of the stem of the fruit.</em></p>

<h3 id="which-crsprojection-should-i-use">Which CRS/projection should I use?</h3>

<p>To decide if a projection is right for your data, answer these questions:</p>

<ul>
  <li>What is the area of minimal distortion?</li>
  <li>What aspect of the data does it preserve?</li>
</ul>

<p><a href="https://www.colorado.edu/geography/gcraft/notes/mapproj/mapproj_f.html">University of Colorado’s Map Projections</a> and the <a href="http://kartoweb.itc.nl/geometrics/map%20projections/mappro.html">Department of Geo-Information Processing</a> has a good discussion of these aspects of projections. Online tools like <a href="http://projectionwizard.org/">Projection Wizard</a> can also help you discover projections that might be a good fit for your data.</p>

<p>Comments from the pros: Take the time to figure identify a projection that is suited for your project. You don’t have to stick to the ones that are popular.</p>

<h3 id="describing-coordinate-reference-systems">Describing Coordinate Reference Systems</h3>

<p>There are several common systems in use for storing and transmitting CRS information. These systems must generally comply with ISO 19111. In order of increasing complexity and customisability, they are EPSG, PROJ, and WKT.</p>

<h4 id="epsg">EPSG</h4>

<p>The <a href="http://www.epsg.org">EPSG system</a> is a database of CRS information maintained by the International Association of Oil and Gas Producers. The dataset contains both CRS definitions and information on how to safely convert data from one CRS to another. Using EPSG is easy as every CRS has a integer identifier, e.g. WGS84 is EPSG:4326. The downside is that you can only use the CRSs EPSG defines and cannot customise them.</p>

<p>EPSG codes can be translated to and from other representational systems. The website spatialreference.org holds the data in many formats.</p>

<p>Detailed information on the structure of the EPSG dataset is <a href="http://www.epsg.org/GuidanceNotes">available here</a>.</p>

<h4 id="ogc-well-known-text">OGC Well-known text</h4>

<p>CRS information is often embedded in geospatial data files using the OGC Well-known Text format, which is a nested list of geodetic parameters. The structure of the information is <a href="http://www.opengeospatial.org/standards/wkt-crs">defined here</a>. WKT is valuable in that the CRS information is more transparent than in EPSG, but can be difficult to read and compare.</p>

<h4 id="proj">PROJ</h4>

<p>PROJ is an open-source library for storing, representing and transforming CRS information. PROJ.5 has been recently released, but PROJ.4 was in use for 25 years so you will still mostly see PROJ referred to as PROJ.4.</p>

<p>PROJ defines CRS systems as a text string of key-value pairs, which makes it easy to customise (and with a little practice, easy to read and interpret). PROJ can use EPSG codes as parameters.</p>

<p>&lt; needs more &gt;</p>

<h2 id="metadata">Metadata</h2>

<p>Spatial data is useless without metadata. Essential metadata is, of course, the CRS information, but proper spatial metadata encompasses more than that. History and provenance of a dataset (how it was made), who is in charge of maintaining it, and appropriate (and inappropriate!) use cases should also be documented in metadata. This information should accompany a spatial dataset wherever it goes.</p>

<p>ISO 19115, EML, etc</p>

<p>&lt; needs more &gt;</p>

<hr />

<h2 id="common-storage-formats">Common storage formats</h2>

<p>What is required for a storage format to be good? Ability to store CRS and metadata along with the data itself, ??? http://switchfromshapefile.org/</p>

<h2 id="raster-1">Raster</h2>

<p>Geotiff, NetCDF?</p>

<h2 id="vector-1">Vector</h2>

<p>Shp GPKG TAB GDB</p>

<p>Network-aware formats?? GRASS</p>

<h2 id="both">Both</h2>

<p>GeoPDF? Geospatial Databases.</p>

<h1 id="common-transfer-formats">Common transfer formats</h1>

<p>Some GIS applications have their own on-disk formats, e.g. GRASS, SAGA. If only one app can open a file, its not a good choice as a transfer standard.</p>

<p>Talk about GDAL here?</p>

<p>Some simplified transfer standards eg KML, GeoJSON, csv, even plain text (GPS NMEA sentences). Mention reasons why these might be useful.</p>

<p>note that many not truly spatial, or not fully spatial e.g. GeoJSON only supports one CRS</p>

<h1 id="what-about-spatial-data-in-r-or-python">What about spatial data in R or python?</h1>

<p>R spatial packages use GDAL so they can consume any format that GDAL can read/write.</p>

<p>all inputs are converted to a limited set of structures defined by sp, sf, or raster (and that point pattern stuff…?)</p>

<p>idk what python does???</p>

<p>Next lesson, setting up a spatial data project in R</p>


<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>TBD</p>
</li>
    
  </ul>
</blockquote>

</article>

<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">lesson home</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../02-organising-spatial-data/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016–2018
	
	<a href="http://datacarpentry.org">Data Carpentry</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	
	
	<a href="/edit/gh-pages/_episodes_rmd/01-spatial-data-structures-formats.Rmd">Edit on GitHub</a>
	
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:lessons@software-carpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
